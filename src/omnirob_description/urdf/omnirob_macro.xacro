<?xml version="1.0" ?>
<robot name="omnirob" xmlns:xacro="http://www.ros.org/wiki/xacro" xmlns:gz="http://gazebosim.org/schema">
    <!-- Helper xacros -->
	<xacro:macro name="omnirob" params="prefix package_name">
		<link name="base_footprint"/>

		<joint name="base_footprint_joint" type="fixed">
			<origin rpy="0 0 0" xyz="0 0 0" />
			<parent link="base_footprint" />
			<child link="${prefix}_base_link" />
		</joint>

		<link name="${prefix}_base_link">
			<inertial>
				<mass value="250" />
				<origin rpy="0 0 0.1" xyz="0 -0.00000 0.24" />
				<inertia ixx="25.77086" ixy="-0.0" ixz="-0.0" iyy="53.79704" iyz="-0.0" izz="58.79601" />
			</inertial>
			<visual>
				<origin rpy="0 0 0" xyz="0 0 0" />
				<geometry>
					<mesh filename="package://${package_name}/meshes/omnirobBaseRot.dae" scale="1 1 1" />
				</geometry>
			</visual>
			<collision>
				<origin rpy="0 0 0" xyz="0 0 0.35" />
				<geometry>
					<box size="0.915855 0.547 0.585000"/>
				</geometry>
			</collision>
		</link>

		<link name="bl_wheel">
			<inertial>
				<origin rpy="0 0 0" xyz="0 0 0" />
				<inertia ixx="0.012412" ixy="-0.000712" ixz="0.000503" iyy="0.015218" iyz="-0.000004" izz="0.011764" />
				<mass value="0.400000" />
			</inertial>
			<visual>
				<origin rpy="0 0 0" xyz="0 0.037 0" />
				<geometry>
					<mesh filename="package://${package_name}/meshes/omnirobBLWheelRot.dae" scale="1 1 1" />
				</geometry>
			</visual>
			<collision>
				<geometry>
					<sphere radius="0.1"/>
				</geometry>
			</collision>
		</link>

		<joint name="bl_wheel_joint" type="continuous">
			<origin rpy="0 0 0" xyz="-0.347000 0.242000 0.130000" />
			<axis xyz="0 0 1" />
			<parent link="${prefix}_base_link" />
			<child link="bl_wheel" />
			<limit effort="10000" velocity="10"/>
    		<dynamics damping="1.0" friction="1.0"/>
		</joint>

		<link name="br_wheel">
			<inertial>
				<origin rpy="0 0 0" xyz="0 0 0" />
				<inertia ixx="0.012412" ixy="-0.000712" ixz="0.000503" iyy="0.015218" iyz="-0.000004" izz="0.011764" />
				<mass value="0.400000" />
			</inertial>
			<visual>
				<origin rpy="0 0 0" xyz="0 -0.0 0" />
				<geometry>
					<mesh filename="package://${package_name}/meshes/omnirobBRWheelRot.dae" scale="1 1 1" />
				</geometry>
			</visual>
			<collision>
				<geometry>
					<sphere radius="0.1"/>
				</geometry>
			</collision>
		</link>

		<joint name="br_wheel_joint" type="continuous">
			<origin rpy="0 0 0" xyz="-0.347000 -0.242000 0.130000" />
			<axis xyz="0 0 1" />
			<parent link="${prefix}_base_link" />
			<child link="br_wheel" />
			<limit effort="10000" velocity="10"/>
    		<dynamics damping="1.0" friction="1.0"/>
		</joint>

		<link name="fr_wheel">
			<inertial>
				<origin rpy="0 0 0" xyz="0 0 0" />
				<inertia ixx="0.012412" ixy="-0.000712" ixz="0.000503" iyy="0.015218" iyz="-0.000004" izz="0.011764" />
				<mass value="0.400000" />
			</inertial>
			<visual>
				<origin rpy="0 0 0" xyz="0 -0.0 0" />
				<geometry>
					<mesh filename="package://${package_name}/meshes/omnirobFRWheelRot.dae" scale="1 1 1" />
				</geometry>
			</visual>
			<collision>
				<geometry>
					<sphere radius="0.1"/>
				</geometry>
			</collision>
		</link>

		<joint name="fr_wheel_joint" type="continuous">
			<origin rpy="0 0 0" xyz="0.347000 -0.242000 0.130000" />
			<axis xyz="0 0 1" />
			<parent link="${prefix}_base_link" />
			<child link="fr_wheel" />
			<limit effort="10000" velocity="10"/>
    		<dynamics damping="1.0" friction="1.0"/>
		</joint>

		<link name="fl_wheel">
			<inertial>
				<origin rpy="0 0 0" xyz="0 0 0" />
				<inertia ixx="0.012412" ixy="-0.000712" ixz="0.000503" iyy="0.015218" iyz="-0.000004" izz="0.011764" />
				<mass value="0.400000" />
			</inertial>
			<visual>
				<origin rpy="0 0 0" xyz="0 0.0 0" />
				<geometry>
					<mesh filename="package://${package_name}/meshes/omnirobFLWheelRot.dae" scale="1 1 1" />
				</geometry>
			</visual>
			<collision>
				<geometry>
					<sphere radius="0.1"/>
				</geometry>
			</collision>
		</link>

		<joint name="fl_wheel_joint" type="continuous">
			<origin rpy="0 0 0" xyz="0.347000 0.242000 0.130000" />
			<axis xyz="0 0 1" />
			<parent link="${prefix}_base_link" />
			<child link="fl_wheel" />
			<limit effort="10000" velocity="10"/>
    		<dynamics damping="1.0" friction="1.0"/>
		</joint>

		<!-- Gazebo frictions -->
		<gazebo reference='fl_wheel'>
			<collision>
			<surface>
				<friction>
				<ode>
					<mu>1.5</mu>
					<mu2>0.0</mu2>
					<fdir1 gz:expressed_in="base_footprint">1 -1 0</fdir1>
				</ode>
				</friction>
			</surface>
			</collision>
		</gazebo>

		<gazebo reference='bl_wheel'>
			<collision>
			<surface>
				<friction>
				<ode>
					<mu>1.5</mu>
					<mu2>0.0</mu2>
					<fdir1 gz:expressed_in="base_footprint">1 1 0</fdir1>
				</ode>
				</friction>
			</surface>
			</collision>
		</gazebo>

		<gazebo reference='fr_wheel'>
			<collision>
			<surface>
				<friction>
				<ode>
					<mu>1.5</mu>
					<mu2>0.0</mu2>
					<fdir1 gz:expressed_in="base_footprint">1 1 0</fdir1>
				</ode>
				</friction>
			</surface>
			</collision>
		</gazebo>

		<gazebo reference='br_wheel'>
			<collision>
			<surface>
				<friction>
				<ode>
					<mu>1.5</mu>
					<mu2>0.0</mu2>
					<fdir1 gz:expressed_in="base_footprint">1 -1 0</fdir1>
				</ode>
				</friction>
			</surface>
			</collision>
		</gazebo>

		<gazebo reference="${prefix}_base_link">
			<mu1>0.000002</mu1>
			<mu2>0.000002</mu2>
		</gazebo>

	</xacro:macro>
</robot>